# Как вставить гибрид в коир


## 1 что делает коир?

Batch of code queries -> embedding model -> cosine simularity 

### что надо 

Bcq -> query modification -> emb model -> cosine sim

## рассуждения на тему

Заметим что коир использует в беире только один вид ретрива dense retrival exact search

То есть можно в него встроить преобработку queries с помощью LLM 

Причем мы можем тогда ввести критерии оценки LLM  (например, сравнивать подробность контекста и изменение точности, можно тогда будет выводить зависимость от температуры или собственно обьема)

Если зафиксировать embedding model, то коир превратится (?) в систему оценки ллм

Оказывается в исходном коде беира есть PassageExpander & queryExpander работающие на TILDE и добавляющие k наиболее подходящих слов к запросу (пока не придумал как его добавить)

Однако по неизвестным причинам он не используется разработчиками коира (экспериментально выяснил что им нужно 3-5 файлов из беира, где один это абстрактный класс вынесенный отдельно, и еще 1 это мат. функции)


